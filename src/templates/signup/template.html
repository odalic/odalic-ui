<!-- Prepared messages for alert-group -->
<injector for="msgtxt.failure">An error occurred while signing up.</injector>

<!-- Main Content -->
<main-cnt>
    <!-- NavBar -->
    <navbar selected="signup" lmenu="default-lm.json" rmenu="default-rm.json" />

    <!-- Content -->
    <div class="container-fluid">
        <div ng-switch="status">
            <!-- Sign up -->
            <div ng-switch-default>
                <!-- Panel -->
                <div class="col-sm-6 col-md-offset-3">
                    <div class="panel">
                        <div class="panel-body odalic-bstyle-lightorange odalic-gfont-moderate">
                            Sign up
                        </div>
                        <div class="panel-body">
                            <form class="form-horizontal" role="form" name="signupForm" ng-init="setForm(this, 'signupForm')" ng-submit="signup.signobj.submit()">
                                <!-- Username / e-mail -->
                                <div class="col-md-6">
                                    <strong>E-mail: *</strong>
                                </div>
                                <div class="col-md-6">
                                    <input class="form-control" type="email" name="username" ng-model="signup.username" required />
                                    <div ng-messages="signupForm.username.$error" ng-if='signupForm.username.$dirty' role="alert">
                                        <div ng-message="required"><error-msg>E-mail has to be filled.</error-msg></div>
                                        <div ng-message="email"><error-msg>E-mail not set correctly.</error-msg></div>
                                    </div>
                                </div>

                                <div class="col-md-6 col-md-offset-6 text-right odalic-gfont-small">
                                    *E-mail address serves as a username.
                                </div>

                                <!-- Empty space -->
                                <div class="col-md-12 odalic-hstyle-small"></div>

                                <!-- Password -->
                                <div class="col-md-6">
                                    <strong>Password: *</strong>
                                </div>
                                <div class="col-md-6">
                                    <input class="form-control" type="password" name="password" ng-model="signup.password" minlength="8" required />
                                    <div ng-messages="signupForm.password.$error" ng-if='signupForm.password.$dirty' role="alert">
                                        <div ng-message="required"><error-msg>Password must not be empty.</error-msg></div>
                                        <div ng-message="minlength"><error-msg>Password is too short.</error-msg></div>
                                    </div>
                                </div>

                                <!-- Empty space -->
                                <div class="col-md-12 odalic-hstyle-small"></div>

                                <!-- Password again -->
                                <div class="col-md-6">
                                    <strong>Retype password: *</strong>
                                </div>
                                <div class="col-md-6">
                                    <input class="form-control" type="password" name="password2" ng-model="signup.password2" compare-to="signup.password" />
                                    <div ng-messages="signupForm.password2.$error" ng-if='signupForm.password2.$dirty' role="alert">
                                        <div ng-message="compare"><error-msg>Passwords do not match.</error-msg></div>
                                    </div>
                                </div>

                                <!-- Empty space -->
                                <div class="col-md-12 odalic-hstyle-small"></div>

                                <div class="col-md-6 col-md-offset-6">
                                    <button-load button-class="form-control" button-type="submit" action="signup.signup" bind="signup.signobj" disabled="false">Sign up</button-load>
                                </div>
                            </form>
                        </div>
                        <div class="panel-body odalic-gfont-small">
                            Already have an account?  <a href="#/login">Log in!</a>
                        </div>
                    </div>
                </div>

                <!-- Notifications -->
                <div class="col-md-12">
                    <alert-group bind="signup.alerts" disappearing="default" />
                </div>
            </div>

            <!-- E-mail sent -->
            <div ng-switch-when="emsent">
                <div class="col-md-6 col-md-offset-3">
                    <alert bind="emsent.alert" closable="false" type="success">
                        <span class="glyphicon glyphicon-envelope"/> <strong>E-mail sent.</strong> An e-mail with additional instructions has been sent to the address you have provided.
                    </alert>
                </div>
            </div>

            <!-- E-mail sent -->
            <div ng-switch-when="nonemail">
                <div class="col-md-6 col-md-offset-3">
                    <alert bind="nonemail.alert" closable="false" type="success">
                        <span class="glyphicon glyphicon-user"/> <strong>Welcome!</strong> Your account has been successfully created! Thank you for using ODALIC. <a href="#/login">Log in now!</a>
                    </alert>
                </div>
            </div>
        </div>
    </div>
</main-cnt>

<!-- Footer -->
<footer/>